# nekidaem test task


ТЗ https://docs.google.com/document/d/1oS2m4lLskCUQCUpPqzwcS8mcPCAvlBLqUM6u-cHc_38/edit

# требования

- Python 3.x
- Django > 3.х
- Postgresql / SQLite. 
- github project должен отражать процесс разработки.
- production environment
- Class-based views.
- docker, Запускать через docker-compose.
- README с описанием запуска проекта.
- Срок выполнения 1-2 дня.

# Задание

Реализовать бэкенд с минимальным фронтендом (можно на голом HTML):

1. Имеется база стандартных пользователей Django (добавляются через админку, регистрацию делать не надо).
2. У каждого пользователя есть персональный блог. Новые создавать он не может.
3. Пост в блоге — элементарная запись с заголовком, текстом и временем создания.
4. Пользователь может подписываться (отписываться) на блоги других пользователей (любое количество).
5. У пользователя есть персональная лента новостей, в которой в обратном хронологическом порядке выводятся посты из блогов, на которые он подписан.
6. Пользователь может помечать посты в ленте прочитанными.
7. При добавлении/удалении подписки содержание ленты меняется (при удалении подписки пометки о "прочитанности" сохранять не нужно).
8. При добавлении поста в ленту — подписчики получают почтовое уведомление со ссылкой на новый пост.
9. Изменение содержания лент подписчиков (и рассылка уведомлений) должно происходить как при стандартной публикации поста пользователем через интерфейс сайта, так при добавлении/удалении поста через админку.

## декомпозиция

0. сформулировать план
    1. посмотреть задание
    2. написать ТЗ
        1. декомпозировать каждый пункт
    3. перенести задачи в гитхаб проекты
1. Имеется база стандартных пользователей Django (добавляются через админку, регистрацию делать не надо).
    1. это есть по умолчанию
2. У каждого пользователя есть персональный блог. Новые создавать он не может.
    1. сделать модель блога. каждый блог связан только с одним юзером. можно использовать OneToOneField
    2. страница просмотра блога, показываются посты от новых к старым
3. Пост в блоге — элементарная запись с заголовком, текстом и временем создания.
    1. сделать модель поста в блоге.
    2. страница просмотра поста
4. Пользователь может подписываться (отписываться) на блоги других пользователей (любое количество).
    1. в модели блога сделать ManyToManyField
    2. на странице просмотра блога должна быть кнопка подписаться
        1. после нажатия меняется на отписаться
5. У пользователя есть персональная лента новостей, в которой в обратном хронологическом порядке выводятся посты из блогов, на которые он подписан.
    1. сделать приложение фид
    2. страница новости:
        1. у авторизованного пользователя берем подписки
        2. у подписок берем посты
        3. посты сортируем по времени от новых в старым
        4. выводим ссылки эти посты
6. Пользователь может помечать посты в ленте прочитанными.
    1. в модели блога сделать поле к постам. у одного блога много постов (каждый блог пометил много постов)
    2. на странице просмотра поста должна быть кнопка пометить прочитанным
7. При добавлении/удалении подписки содержание ленты меняется (при удалении подписки пометки о "прочитанности" сохранять не нужно).
    1. при удалении подписки все посты из этого блога которые помечены удаляются из помеченных
8. При добавлении поста в ленту — подписчики получают почтовое уведомление со ссылкой на новый пост.
    1. в конструкторе прописать отправку письма на адреса тех юзеров, блоги которых подписаны на блог, в котором создается пост
9. Изменение содержания лент подписчиков (и рассылка уведомлений) должно происходить как при стандартной публикации поста пользователем через интерфейс сайта, так при добавлении/удалении поста через админку.
    1. то есть нужно это реализовать в моделях, а не в видах